/*
 * angular-click-x v1.0.0
 * (c) 2016 Tanase Butcaru, http://www.butcaru.com
 * License: MIT
 * 
 * GitHub: https://github.com/TanaseButcaru/angular-click-x
 */

"use strict";"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="tb.clickX"),angular.module("tb.clickX",[]).provider("clickXConfig",function(){function e(){var e=!1,i={apple_phone:/iPhone/i,apple_ipod:/iPod/i,apple_tablet:/iPad/i,android_phone:/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,android_tablet:/Android/i,amazon_phone:/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,amazon_tablet:/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,windows_phone:/IEMobile/i,windows_tablet:/(?=.*\bWindows\b)(?=.*\bARM\b)/i,other_blackberry:/BlackBerry/i,other_blackberry_10:/BB10/i,other_opera:/Opera Mini/i,other_chrome:/(CriOS|Chrome)(?=.*\bMobile\b)/i,other_firefox:/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i};return angular.forEach(i,function(i,t){return e?!1:void(e=i.test(navigator.userAgent))}),e}this.activeClass="click-x-active",this.isMobile=e(),window.clickX={},this.setActiveClass=function(e){this.activeClass=e},this.$get=function(){return this}}).directive("clickX",["$parse","$window","clickXConfig",function(e,i,t){return{restrict:"A",link:function(n,o,r){function c(e){(r.disabled===!0||angular.isDefined(r.disabled))&&e.preventDefault(),t.isMobile?d.classList.add(b):i.clickX.hasOwnProperty("startTarget")&&l(e,!0)&&d.classList.add(b)}function a(e){d.classList.remove(b),r.disabled!==!1&&angular.isDefined(r.disabled)||!l(e)||n.$apply(function(){u(n,{$event:e})})}function s(e){d.classList.remove(b)}function l(e,n){var o,r,c,a,s=!1;if(t.isMobile)r=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY,o=d;else{if(!i.hasOwnProperty("clickX"))return s;if(r=e.clientX,c=e.clientY,o=i.clickX.startTarget,!n)for(var l in i.clickX)delete i.clickX[l]}return a=document.elementFromPoint(r,c),s=o.contains(a)||o.isEqualNode(a)}var d=o[0],u=e(r.clickX),b=t.activeClass;t.isMobile?(d.addEventListener("touchstart",c),d.addEventListener("touchend",a),d.addEventListener("touchcancel",s)):(d.addEventListener("mousedown",function(e){i.clickX.startTarget=document.elementFromPoint(e.clientX,e.clientY),c(e)}),d.addEventListener("mouseup",a),i.addEventListener("mouseup",function(e){if(i.clickX.hasOwnProperty("startTarget")&&!l(e,!0))for(var t in i.clickX)delete i.clickX[t]}),d.addEventListener("mouseenter",c),d.addEventListener("mouseleave",function(e){i.clickX.hasOwnProperty("startTarget")&&s(e)})),d.addEventListener("click",function(e){return!1})}}}]);
